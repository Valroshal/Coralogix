import{a as R,b as N,c as W,d as q,e as k,f as z,g as A,h as D,i as j,j as B,k as L,l as U,m as G}from"./chunk-SRQFRXI3.js";import{a as H}from"./chunk-4NHKN4RQ.js";import{$ as C,$a as M,Ca as O,Ha as d,J as S,Oa as s,Qa as t,Ra as r,Ta as P,Ua as g,Va as _,Za as f,_ as p,_a as c,ab as V,bb as y,cb as v,db as h,i as b,ua as l,va as E,w as x,wb as T,xb as I,yb as F}from"./chunk-KRUOKVBT.js";function J(n,i){n&1&&(t(0,"small"),c(1,"Amount is required."),r())}function K(n,i){n&1&&(t(0,"small"),c(1,"Amount must be greater than 0."),r())}function Q(n,i){if(n&1&&(t(0,"div",17),d(1,J,2,0,"small",18)(2,K,2,0,"small",18),r()),n&2){_();let e=f(8);l(),s("ngIf",e.errors==null?null:e.errors.required),l(),s("ngIf",e.errors==null?null:e.errors.min)}}function X(n,i){if(n&1&&(t(0,"option",19),c(1),r()),n&2){let e=i.$implicit;s("value",e),l(),M(" ",e," ")}}function Z(n,i){n&1&&(t(0,"small"),c(1,"Please select a currency."),r())}function $(n,i){if(n&1&&(t(0,"div",17),d(1,Z,2,0,"small",18),r()),n&2){_();let e=f(14);l(),s("ngIf",e.errors==null?null:e.errors.required)}}function ee(n,i){if(n&1&&(t(0,"option",19),c(1),r()),n&2){let e=i.$implicit;s("value",e),l(),M(" ",e," ")}}function ne(n,i){n&1&&(t(0,"small"),c(1,"Please select a currency."),r())}function re(n,i){if(n&1&&(t(0,"div",17),d(1,ne,2,0,"small",18),r()),n&2){_();let e=f(23);l(),s("ngIf",e.errors==null?null:e.errors.required)}}function te(n,i){if(n&1&&(t(0,"div",20)(1,"h3"),c(2,"Conversion Result"),r(),t(3,"p"),c(4),r()()),n&2){let e=_();l(4),V("",e.amount," ",e.fromCurrency," = ",e.result," ",e.toCurrency,"")}}var Y=class n{constructor(i){this.exchangeRateService=i}amount=null;fromCurrency=null;toCurrency=null;currencies=[];result=null;ngOnInit(){this.getCurrencies()}getCurrencies(){this.exchangeRateService.getCurrencies().pipe(S(i=>{this.currencies=Object.keys(i)}),x(i=>(console.error("Error fetching currencies:",i),alert("Unable to fetch the list of currencies. Please try again later."),b))).subscribe()}onFieldChange(){this.result=null}convertCurrency(){if(!this.amount||!this.fromCurrency||!this.toCurrency)return;let i=this.amount,e=this.fromCurrency,o=this.toCurrency;this.exchangeRateService.convert(e,o,i).pipe(S(a=>{let m=a.rates[o];if(!m)throw new Error("Conversion result is null or undefined.");this.exchangeRateService.addToHistory({amount:i,from:e,to:o,result:m}),this.result=m}),x(a=>(console.error("Error fetching conversion rate:",a),alert("Unable to fetch conversion rate. Please try again later."),b))).subscribe()}static \u0275fac=function(e){return new(e||n)(E(H))};static \u0275cmp=O({type:n,selectors:[["app-currency-converter"]],decls:31,vars:10,consts:[["converterForm","ngForm"],["amountRef","ngModel"],["fromCurrencyRef","ngModel"],["toCurrencyRef","ngModel"],[3,"ngSubmit"],[1,"form-group"],["for","amount"],["type","number","id","amount","name","amount","required","","min","0.01","placeholder","Enter amount",1,"form-control",3,"ngModelChange","change","input","ngModel"],["class","error-message",4,"ngIf"],["for","fromCurrency"],["id","fromCurrency","name","fromCurrency","required","",1,"form-control",3,"ngModelChange","change","ngModel"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["for","toCurrency"],["id","toCurrency","name","toCurrency","required","",1,"form-control",3,"ngModelChange","change","ngModel"],["type","submit",1,"submit-btn",3,"disabled"],["class","result",4,"ngIf"],[1,"error-message"],[4,"ngIf"],[3,"value"],[1,"result"]],template:function(e,o){if(e&1){let a=P();t(0,"form",4,0),g("ngSubmit",function(){return p(a),C(o.convertCurrency())}),t(2,"h2"),c(3,"Currency Converter"),r(),t(4,"div",5)(5,"label",6),c(6,"Amount"),r(),t(7,"input",7,1),h("ngModelChange",function(u){return p(a),v(o.amount,u)||(o.amount=u),C(u)}),g("change",function(){return p(a),C(o.onFieldChange())})("input",function(){return p(a),C(o.onFieldChange())}),r(),d(9,Q,3,2,"div",8),r(),t(10,"div",5)(11,"label",9),c(12,"From Currency"),r(),t(13,"select",10,2),h("ngModelChange",function(u){return p(a),v(o.fromCurrency,u)||(o.fromCurrency=u),C(u)}),g("change",function(){return p(a),C(o.onFieldChange())}),t(15,"option",11),c(16,"Select a currency"),r(),d(17,X,2,2,"option",12),r(),d(18,$,2,1,"div",8),r(),t(19,"div",5)(20,"label",13),c(21,"To Currency"),r(),t(22,"select",14,3),h("ngModelChange",function(u){return p(a),v(o.toCurrency,u)||(o.toCurrency=u),C(u)}),g("change",function(){return p(a),C(o.onFieldChange())}),t(24,"option",11),c(25,"Select a currency"),r(),d(26,ee,2,2,"option",12),r(),d(27,re,2,1,"div",8),r(),t(28,"button",15),c(29,"Convert"),r()(),d(30,te,5,4,"div",16)}if(e&2){let a=f(1),m=f(8),u=f(14),w=f(23);l(7),y("ngModel",o.amount),l(2),s("ngIf",m.invalid&&m.touched),l(4),y("ngModel",o.fromCurrency),l(4),s("ngForOf",o.currencies),l(),s("ngIf",u.invalid&&u.touched),l(4),y("ngModel",o.toCurrency),l(4),s("ngForOf",o.currencies),l(),s("ngIf",w.invalid&&w.touched),l(),s("disabled",a.invalid),l(2),s("ngIf",o.result!==null)}},dependencies:[F,T,I,G,z,j,B,R,A,D,N,W,U,L,k,q],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1.5rem;max-width:400px;margin:0 auto;padding:1rem;box-sizing:border-box}.form-group[_ngcontent-%COMP%]{width:100%}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:.5rem;font-size:1rem;border:1px solid #ccc;border-radius:4px;box-sizing:border-box;outline:none}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 4px #007bff80}.submit-btn[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:.5rem 1rem;font-size:1rem;border-radius:4px;cursor:pointer;transition:background-color .3s ease;width:100%;max-width:400px}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{color:red;font-size:.875rem;margin-top:.25rem;text-align:left}.result[_ngcontent-%COMP%]{margin-top:2rem;padding:1rem;border:1px solid #ccc;border-radius:8px;background-color:#f9f9f9;text-align:center;font-size:1.2rem;max-width:400px;margin:2rem auto 0}@media (max-width: 500px){input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], .submit-btn[_ngcontent-%COMP%]{max-width:300px}form[_ngcontent-%COMP%]{align-items:baseline}}"]})};export{Y as CurrencyConverterComponent};
