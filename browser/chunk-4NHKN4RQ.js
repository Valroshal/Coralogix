import{Db as g,M as h,R as y,l as c,o as l,u as p,w as n}from"./chunk-KRUOKVBT.js";var v=class a{constructor(r){this.http=r}apiUrl="https://api.frankfurter.app";history=[];getCurrencies(){return this.http.get(`${this.apiUrl}/currencies`).pipe(n(this.handleError("getCurrencies")))}convert(r,t,e){return this.http.get(`${this.apiUrl}/latest?amount=${e}&from=${r}&to=${t}`).pipe(n(this.handleError("convert")))}getHistory(){try{let r=localStorage.getItem("history");return r?(this.history=r&&JSON.parse(r),this.history):[]}catch(r){return console.error("Error retrieving history from localStorage:",r),[]}}addToHistory(r){try{this.history.push(r),localStorage.setItem("history",JSON.stringify(this.history))}catch(t){console.error("Error saving history to localStorage:",t)}}getWeeklyRates(r){let t=new Date,e=Array.from({length:7},(o,s)=>{let i=new Date(t);return i.setDate(t.getDate()-s),i.toISOString().split("T")[0]}),u=e.map(o=>this.http.get(`${this.apiUrl}/${o}?base=${r}`));return p(u).pipe(l(o=>{let s={};return o.forEach((i,f)=>{s[e[f]]=i.rates}),{rates:s}}),n(this.handleError("getWeeklyRates")))}handleError(r){return t=>(console.error(`${r} failed:`,t),c(()=>new Error(`Failed to perform ${r}. Please try again later.`)))}static \u0275fac=function(t){return new(t||a)(y(g))};static \u0275prov=h({token:a,factory:a.\u0275fac,providedIn:"root"})};export{v as a};
