import{c as F}from"./chunk-X7U6ROW6.js";import{b as w,e as P,h as R,i as T,j as D,m as W}from"./chunk-SRQFRXI3.js";import{a as k}from"./chunk-4NHKN4RQ.js";import{$a as u,Ca as O,Ha as m,J as v,Oa as l,Qa as i,Ra as a,Sa as x,Ua as h,_a as p,a as g,b as d,bb as C,cb as y,db as f,i as b,ua as c,va as M,w as _,wb as S,yb as E}from"./chunk-KRUOKVBT.js";function j(o,t){if(o&1&&(i(0,"option",10),p(1),a()),o&2){let n=t.$implicit;l("value",n),c(),u(" ",n," ")}}function B(o,t){if(o&1&&(i(0,"option",10),p(1),a()),o&2){let n=t.$implicit;l("value",n),c(),u(" ",n," ")}}var I=class o{constructor(t){this.exchangeRateService=t}currencies=[];baseCurrency="USD";targetCurrency="EUR";chartData={labels:[],datasets:[{label:"Exchange Rate Trends",data:[],borderColor:"blue",backgroundColor:"rgba(0, 0, 255, 0.1)",borderWidth:2,tension:.4,pointRadius:3}]};chartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top"},title:{display:!0,text:"Currency Exchange Rate Trends",font:{size:18}}},scales:{x:{grid:{display:!1},title:{display:!0,text:"Dates"}},y:{grid:{color:"#e5e5e5"},title:{display:!0,text:"Exchange Rate"}}}};ngOnInit(){this.getCurrencies(),this.fetchTrends()}getCurrencies(){this.exchangeRateService.getCurrencies().pipe(v(t=>{this.currencies=Object.keys(t)}),_(t=>(console.error("Error fetching currencies:",t),alert("Unable to fetch the list of currencies. Please try again later."),b))).subscribe()}fetchTrends(){if(!this.baseCurrency||!this.targetCurrency){alert("Please select both base and target currencies.");return}let t=this.baseCurrency,n=this.targetCurrency;this.exchangeRateService.getWeeklyRates(t).subscribe(e=>{let s=Object.keys(e.rates),r=s.map(N=>e.rates[N][n]);this.chartData=d(g({},this.chartData),{labels:s.reverse(),datasets:[d(g({},this.chartData.datasets[0]),{data:r.reverse()})]})})}onCurrencyChange(){this.fetchTrends()}static \u0275fac=function(n){return new(n||o)(M(k))};static \u0275cmp=O({type:o,selectors:[["app-chart"]],decls:16,vars:7,consts:[[1,"chart-container"],[1,"input-container"],[1,"form-group"],["for","baseCurrency"],["id","baseCurrency",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","targetCurrency"],["id","targetCurrency",3,"ngModelChange","change","ngModel"],[1,"chart-area"],["baseChart","","height","450",3,"type","data","options"],[3,"value"]],template:function(n,e){n&1&&(i(0,"div",0)(1,"div",1)(2,"h2"),p(3,"Currency Trends"),a(),i(4,"div",2)(5,"label",3),p(6,"Base Currency"),a(),i(7,"select",4),f("ngModelChange",function(r){return y(e.baseCurrency,r)||(e.baseCurrency=r),r}),h("change",function(){return e.onCurrencyChange()}),m(8,j,2,2,"option",5),a()(),i(9,"div",2)(10,"label",6),p(11,"Target Currency"),a(),i(12,"select",7),f("ngModelChange",function(r){return y(e.targetCurrency,r)||(e.targetCurrency=r),r}),h("change",function(){return e.onCurrencyChange()}),m(13,B,2,2,"option",5),a()()(),i(14,"div",8),x(15,"canvas",9),a()()),n&2&&(c(7),C("ngModel",e.baseCurrency),c(),l("ngForOf",e.currencies),c(4),C("ngModel",e.targetCurrency),c(),l("ngForOf",e.currencies),c(2),l("type","line")("data",e.chartData)("options",e.chartOptions))},dependencies:[W,T,D,R,w,P,F,E,S],styles:[".chart-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:1rem;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1.5rem}.input-container[_ngcontent-%COMP%]{width:400px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1.5rem}.chart-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:0}.form-group[_ngcontent-%COMP%]{width:100%}select[_ngcontent-%COMP%]{width:100%;padding:.5rem;font-size:1rem;border:1px solid #ccc;border-radius:4px}.chart-area[_ngcontent-%COMP%]{margin-top:2rem;width:100%;max-width:600px;margin:0 auto;height:48vh}canvas[_ngcontent-%COMP%]{display:block;width:100%;height:auto}@media (max-width: 500px){.input-container[_ngcontent-%COMP%]{align-items:baseline;width:300px}.chart-container[_ngcontent-%COMP%]{align-items:baseline}}"]})};export{I as ChartComponent};
